<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="stylesheet" href="../../assets/css/signup.css">
    <link rel="shortcut icon" href="../../assets/images/favicon img.png" type="image/x-icon">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <!--------------------- Font awesome ------------------->

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css"
        integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!------------------ google fonts ------------------------>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BOOKS-STORE</title>
    <script src="/assets/JS files/sweetalert.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/suryaumapathy2812/notify__js/notify.css">
    <meta name="google-signin-client_id" content="2090015405-5sk0mum079j5rhpqacttb1qnt9s2qmmn.apps.googleusercontent.com">

</head>

<body>
    <script src="https://apis.google.com/js/platform.js" async defer></script>
    <script src="https://cdn.jsdelivr.net/gh/suryaumapathy2812/notify__js/notify.js"> </script>


    <!-- START THE LOGIN PAGE -->

    <div class="container">
        <div class="forms">
            <div class="svg-img">
                <img src="../../assets/images/undraw_bibliophile_re_xarc.svg" alt="svg img">
            </div>
            <div class="login-form">
                <form id="register">
                    <h1>Welcome to <span>Book Store.</span></h1><br>
                    <p>Enhance Your knowledge Here.</p>
                    <label for="User id"></label>
                    <input type="text" placeholder="Ener Your Name" id="name" required="true" pattern="^[a-zA-Z]{3,20}$"><br>
                    <input type="tel" placeholder="Enter your number" id="phone_number" required="true"
                        maxlength="10"><br>
                    <input type="email" placeholder="Enter Your Email" id="email" required="true"><br>
                    <input type="password" placeholder="Enter Your Password" id="password" required="true"
                        pattern="^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?!.*\s).*$"> <br>
                    <input type="password" name="pass" placeholder="Confirm Password" id="confirm_pwd" required="true"
                        pattern="^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?!.*\s).*$">
                    <a href=""><input class="btn" type="submit" value="Sign Up" ></a><br>
                    <!-- <button class="btn" type="submit" id="bt">Sign Up</button> -->
                    <div class="rem-me">
                        <input type="checkbox" id="check">
                        <h4>Remember me</h4>
                        <a href="">
                            <div class="already-user">
                                <span>Already a user? <a href="../../Pages/Account/login.html">Log in</a></span>
                            </div>
                        </a>
                    </div>
                    <h2>Sign Up With Our Social links</h2>

                    <div class="social-link">
                        <i class="fa-brands fa-google"></i>
                        <i class="fa-brands fa-facebook"></i>
                        <i class="fa-brands fa-twitter"></i>
                        <i class="fa-brands fa-apple"></i>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <script src="/assets/JS files/googlesign.js"></script>
    <script>
        // USE THE PREVENT DEFAULT 

        let form = document.querySelector("form");
        form.addEventListener("submit", e => {
            e.preventDefault();
            signup();
        });


        function signup() {

            let name = document.getElementById("name").value.trim();
            let phone_number = document.getElementById("phone_number").value.trim();
            let email = document.getElementById("email").value.trim();
            let password = document.getElementById("password").value.trim();
            let confirmpassword = document.getElementById("confirm_pwd").value.trim();

            let user = {};

            // Get the value from users    

            user["user_name"] = name;
            user["Phone_number"] = Number(phone_number);
            user["email"] = email;
            user["password"] = password;
            user["confirm_password"] = confirmpassword;
            user["address"] = "";
            user["user_state"] = "";
            user["user_city"] = "";
            user["user_pincode"] = "";
            user["wishlistcount"] = "";

            // save the user record to userslist 

            // left part = [{}, {}]                                  ??  right part
            let user_records = (JSON.parse(localStorage.getItem("userslist"))) ?? [];

            // Checking the user have already account 
            let j = 0;

            for (let i = 0; i < user_records.length; i++) {
                if (user_records[i]["email"] === email) {
                    j = 1;
                    break;
                }
            }
            if (j == 1) {
                // alert("This email is already exists");
                // swal( 'Oh!','This email is already Exists','warning');
                Notify.error("This is email is already Exists");
                window.location.href = "../Account/login.html";

            }
            else {
                // alert("you're sign up");
                // swal( 'Good job!','You clicked the button!','success');
                Notify.success("Sucessfully Signup");
                user_records.push(user);
                localStorage.setItem("userslist", JSON.stringify(user_records));

            }

            // check the password 
            if (user["password"] === user["confirm_password"]) {
                window.location.href = "../Account/login.html";
            }
            else {
                Notify.error("Please Check the password");
                // alert("Please check the password");
                // swal( 'OOPS','Please Check the password','info')
                
            };

        };
    </script>
</body>

</html>