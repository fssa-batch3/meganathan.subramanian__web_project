<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="stylesheet" href="../../assets/css/edit_profile.css">
    <link rel="shortcut icon" href="../../assets/images/favicon img.png" type="image/x-icon">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <!--------------------- Font awesome ------------------->

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css"
        integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!------------------ google fonts ------------------------>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BOOKS-STORE</title>
    <script src="/assets/JS files/sweetalert.min.js"></script>

</head>

<body>
    <!------------------------ Create the navigation bar ----------------------->

    <div class="head">
        <div class="nav-logo">
            <div class="logo">
                <a href="../../index.html"><img src="../../assets/images/books_store-removebg-preview.png"
                        alt="webiste logo" width="190"></a>
            </div>
            <div class="navi2">
                <ol class="lang">
                    <li><a href="#">Lang <i class=" fa-solid fa-caret-down"></i></a>
                        <ol class="Lang_option">
                            <li> <a href="#">English</a></li>
                            <li> <a href="#">Tamil</a></li>
                        </ol>
                    </li>
                </ol>
                <ul class="fonts">
                    <li> <a href="../orders/Wish_list.html">
                            <i class="fa-regular fa-heart"></i>
                        </a></li> <span>0</span>
                    <li> <a href="../../Pages/Account/signup.html"> <i class="fa-solid fa-cart-shopping"></i> </a></li>
                </ul>
            </div>
        </div>


        <!------------------- Create a Search bar ---------------->

        <div class="search_bar">
            <input type="text" placeholder="Search By Author Name Or Book name">
        </div>


        <!------------------------------- END OF THE NAVIGATION --------------------------------->


        <div class="container">
            <div class="nav">
                <div class="navi1">
                    <ul>
                        <li><a href="../Books/self_help.html"><img src="../../assets/images/search books.png"
                                    alt="search books img"></a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>



    <!------------------- navigation content--------->

    <div class="navigation">
        <ul>
            <li> <a href="../../index.html">Home</a></li>
            <li class="explore-menu" id="click"> <a href="#">Categories<i class="fa-solid fa-caret-down"></i></a>
                <ol class="Explore-option">
                    <li class="Arts-option"><a href="#">Arts and Biography</a>
                        <div class="arts-menu">
                            <ol>
                                <li><a href="#">Arts Forms</a></li>
                                <li><a href="#">Dance And Performing</a></li>
                                <li><a href="#">Flim and Tv</a></li>
                            </ol>
                        </div>
                    </li>
                    <li><a href="#">Fiction Books</a></li>
                    <li><a href="#">Law</a></li>
                    <li><a href="#">Medicine</a></li>
                    <li><a href="../Books/self_help.html">Self Help book</a></li>
                    <li><a href="#">Life Style</a></li>
                    <li><a href="#">Science And Maths</a></li>

                </ol>
            </li>
            <li><a href="../Books/Combo book.html">Combo</a></li>
            <li><a href="../Books/self_help.html">Best Seller</a></li>
            <li><a href="../../Customer-feedback.html">Customer Feedback</a></li>
            <li class="profile-menu"><a href="">My Account <i class="fa-solid fa-user"></i></a>
                <div class="profile">
                    <ol>
                        <li><a href="../Account/edit-profile.html"><i class="fa-solid fa-pen-to-square"></i>Edit
                                Profile</a></li>
                        <li><a href="#"><i class="fa-solid fa-message"></i>Inbox</a> </li>
                        <li><a href="#"><i class="fa-solid fa-bars"></i>Setting</a></li>
                        <li id="log-out"><a href="#"><i class="fa-solid fa-arrow-right-from-bracket"></i>Logout</a></li>
                    </ol>
                </div>
            </li>
        </ul>

    </div>
    <div class="home-page">
        <a href="../../index.html">home></a>
        <a href="../Books/self_help.html">products></a>
        <a href="../Account/edit-profile.html">Account</a>
    </div>

    <!------ START THE PROFILE CONTENT ---------------->
    <div class="container">
        <div class="edit-profile">
            <div class="profile-box">
                <div class="profile-img">
                    <img src="../../assets/images/profie img.jpg" alt="profile img" id="profile_img">
                    <h3>Hello, <span id="user_name">user</span> </h3>
                </div>
                <hr>
                <div class="profile-options">
                    <h2 id="user_profile">Manage Profile</h2>
                    <h2 id="user_return">Return & Orders</h2>
                    <h2>Manage Adresses</h2>
                    <h2>Terms & condition</h2>
                    <h2>Log Out</h2>
                </div>
            </div>
        </div>

        <!------------ START THE EDIT CONTENT  ------------->
        <div class="user-edit">
            <div class="user">
                <div class="user-inp">
                    <h1>Edit Your Profile</h1>
                    <div class="user-name">
                        <label for="name">Name :</label>
                        <input type="text" name="name" id="name" placeholder="Username" pattern="^[a-zA-Z]{3,20}$"
                            disabled>
                    </div>

                    <div class="user-password">
                        <label for="last">Password :</label>
                        <input type="password" pattern="^[a-zA-Z]{3,20}$" id="password" placeholder="*********"
                            disabled>
                    </div>
                    <div class="user-email">
                        <label for="email">Email :</label>
                        <input type="email" name="user-email" placeholder="example@gmail.com" id="email" disabled>
                    </div>

                    <div class="user-phone-number">
                        <label for="number">Phone Number :</label>
                        <input type="number" placeholder="1234567892" id="phone_number" pattern="^(\d{7}|\d{10})$"
                            disabled>
                    </div>

                    <div class="user-address">
                        <label for="adreess">Address :</label>
                        <textarea name="adress" cols="30" rows="4" id="user_address" disabled>59/123 Vivenkanda street,vadapalani,chennai-00000"
                         </textarea>
                    </div>
                    <div class="user_edit_btn">
                        <button onclick="edit()">Save Changes</button>
                        <button id="edit_user">Edit</button>
                        <button onclick="deleteprofile()">delete</button>

                    </div>
                </div>
                <div class="user_orders">
                    <h1 class="head"> My Orders</h1>
                    <div class="book_info">
                        <h2> Order Status : Pending...</h2>
                        <hr>
                        <div class="single_book">
                            <div class="book_img">
                                <img src="https://missnatura.in/wp-content/uploads/2023/02/IMG-20230222-WA0003.jpg"
                                    width="150px" height="130px" alt="Rosemery leaves" />
                            </div>
                            <div class="status">
                                <p>Attitude Is Everything</p>
                                <p>Quantity - 1</p>
                                <p>Order Id - 243</p>
                                <p>Ordered Date - 27/03/2023</p>

                            </div>
                        </div>
                    </div>


                    <div class="book_info">
                        <h2> Order Status : Pending...</h2>
                        <hr>
                        <div class="single_book">
                            <div class="book_img">
                                <img src="https://missnatura.in/wp-content/uploads/2023/02/IMG-20230222-WA0003.jpg"
                                    width="150px" height="130px" alt="Rosemery leaves" />
                            </div>
                            <div class="status">
                                <p>Attitude Is Everything</p>
                                <p>Quantity - 1</p>
                                <p>Order Id - 243</p>
                                <p>Ordered Date - 27/03/2023</p>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-------------------FOOTER CONTETNT ------------------>
    <footer>
        <div class="row">
            <div class="bookstore_logo">
                <img src="../../assets/images/logo.png" alt="bookstore logo">
                <h3>"Our purpose is motivate yourself <br>and improve your knowdledge".</h3>
            </div>
            <div class="useful_links">
                <h3>Stuff</h3>
                <ul>
                    <li>Privacy</li>
                    <li>Security</li>
                    <li>FQA</li>
                    <li>Coupons</li>
                </ul>
            </div>
            <div class="useful_links">
                <h3>Useful links</h3>
                <ul>
                    <li> Blog Post</li>
                    <li>Return Policy</li>
                    <li>join Affilate</li>
                    <li>Terms and Condition</li>

                </ul>
            </div>
            <div class="contact_us">
                <div class="icons">
                    <h3>Contact US</h3>
                    <i class="fa-brands fa-github"></i>
                    <i class="fa-brands fa-linkedin"></i>
                    <i class="fa-brands fa-whatsapp"></i>
                    <i class="fa-brands fa-twitter"></i>
                </div>
            </div>
        </div>
        <p style="text-align:center ;">&#169;Copyright 2022-Meganathan</p>
    </footer>

    <!------------------------END OF THE FOOTER CONTENT ---------------------->
    <script>
        let users = JSON.parse(localStorage.getItem("userslist"));
        for (let i = 0; i < users.length; i++) {
            document.getElementById("name").value = users[i]["user_name"];
            document.getElementById('email').value = users[i]['email'];
            document.getElementById("phone_number").value = users[i]["Phone_number"];
            document.getElementById("password").value = users[i]["password"];
        };
        // console.log(users);

        // Edit the user profile
        function edit() {
            // let users = JSON.parse(localStorage.getItem("userslist"));
            document.getElementById("name").setAttribute("disabled", "");
            document.getElementById("phone_number").setAttribute("disabled", "");
            document.getElementById("password").setAttribute("disabled", "");
            document.getElementById("user_address").setAttribute("disabled", "");

            for (let i = 0; i < users.length; i++) {
                if (document.getElementById("email").value == users[i]["email"]) {
                    let user_address = document.getElementById("user_address").value;
                    users[i].address = user_address;
                    users[i].user_name = document.getElementById("name").value;
                    users[i].password = document.getElementById("password").value;

                };
                localStorage.setItem("userslist", JSON.stringify(users));
            };
            // console.log(users);
            swal('Great', 'Youre account in Successfully Changed!', 'success');

        };


        // Create a delete profile 

        function deleteprofile() {
            confirm("are you sure want to delete your profile?")
            Notify.success("Your're account is successfully deleted");
            for (let i = 0; i < users.length; i++) {
                if (document.getElementById("email").value == users[i].email) {
                    users.splice(i, 1);
                    localStorage.setItem("userslist", JSON.stringify(users));
                };
            };
        };

        // Remove the disabled button with js

        let edit_user = document.getElementById("edit_user");

        edit_user.addEventListener("click", (e) => {
            document.getElementById("name").removeAttribute("disabled");
            document.getElementById("phone_number").removeAttribute("disabled");
            document.getElementById("password").removeAttribute("disabled");
            document.getElementById("user_address").removeAttribute("disabled");

            // Adding the Address field into the local storge

            // for (let i = 0; i < users.length; i++) {
            //     if (active_user == users[i]["email"]) {

            //     };
            // };

        });

        // logout

        let log_out = document.getElementById("log-out");
        let active_user = localStorage.getItem("activeUser");
        log_out.addEventListener("click", (e) => {
            const log_Out = delete active_user;
            localStorage.setItem("activeUser", log_Out);
            window.location.href = "/Pages/Account/login.html";
            alert("Thank you visiting our website");
        });


        // write the return prouducts

        let user_orders = document.querySelector(".user_orders");
        let user_profile = document.querySelector(".user-inp");
        let user_return = document.getElementById("user_return");
        let manage_profile = document.getElementById("user_profile");

        user_return.addEventListener("click", () => {

            user_orders.style.display = "block";
            user_profile.style.display = "none";
        });
        manage_profile.addEventListener("click",()=>{
            user_profile.style.display = "block";

        });
        manage_profile.addEventListener("click",function(){
            user_orders.style.display = "none";

        });
    </script>
</body>

</html>