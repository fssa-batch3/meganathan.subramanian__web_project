<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="stylesheet" href="../../assets/css/signup.css">
    <link rel="shortcut icon" href="../../assets/images/favicon img.png" type="image/x-icon">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <!--------------------- Font awesome ------------------->

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css"
        integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!------------------ google fonts ------------------------>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BOOKS-STORE</title>
</head>

<body>

    <!-- START THE LOGIN PAGE -->

    <div class="container">
        <div class="forms">
            <div class="svg-img">
                <img src="../../assets/images/undraw_bibliophile_re_xarc.svg" alt="svg img">
            </div>
            <div class="login-form">
                <form id="register">
                    <h1>Welcome to <span>Book Store.</span></h1><br>
                    <p>Enhance Your knowledge Here.</p>
                    <label for="User id "></label>
                    <input type="text" placeholder="Ener Your Name" id="name" required="true"
                        pattern="^[a-zA-Z][a-zA-Z0-9-_\.]{1,20}$"><br>
                    <input type="text" placeholder="User Name" id="user_name" required="true"
                        pattern="[a-zA-Z0-9]+"><br>
                    <input type="email" placeholder="Enter Your Email" id="email" required="true"><br>
                    <input type="password" placeholder="Enter Your Password" id="password" required="true"
                        pattern="^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?!.*\s).*$"> <br>
                    <input type="password" name="pass" placeholder="Confirm Password" id="confirm_pwd" required="true"
                        pattern="^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?!.*\s).*$">
                    <a href=""><input class="btn" type="submit" value="Sign Up"></a><br>
                    <!-- <button class="btn" type="submit" id="bt">Sign Up</button> -->
                    <div class="rem-me">
                        <input type="checkbox" id="check">
                        <h4>Remember me</h4>
                        <a href="">
                            <div class="already-user">
                                <span>Already a user? <a href="../../Pages/Admin_pages/Admin_login.html">Log in</a></span>
                            </div>
                        </a>
                    </div>
                    <h2>Sign Up With Our Social links</h2>

                    <div class="social-link">
                        <i class="fa-brands fa-google"></i>
                        <i class="fa-brands fa-facebook"></i>
                        <i class="fa-brands fa-twitter"></i>
                        <i class="fa-brands fa-apple"></i>
                    </div>

                </form>
            </div>


        </div>


    </div>
    <script>
        
        // USE THE PREVENT DEFAULT 

        let form = document.querySelector("form");
        form.addEventListener("submit", e => {
            e.preventDefault();
            signup();
        });

        function signup() {

            let name = document.getElementById("name").value.trim();
            let username = document.getElementById("user_name").value.trim();
            let email = document.getElementById("email").value.trim();
            let password = document.getElementById("password").value.trim();
            let confirmpassword = document.getElementById("confirm_pwd").value.trim();
            let bookid = Math.floor(Math.random() * 100);

            let seller = {};

            // Get the value from users    
            seller["name"] = name;
            seller["user_name"] = username;
            seller["email"] = email;
            seller["password"] = password;
            seller["confirm_password"] = confirmpassword;
            seller["bookid"] = bookid;

            // save the user record to userslist 

            // left part = [{}, {}]                                  ??  right part
            let seller_records = (JSON.parse(localStorage.getItem("seller_details"))) ?? [];

            // Checking the user have already account 
            let j = 0;

            for (let i = 0; i < seller_records.length; i++) {
                if (seller_records[i]["email"] === email) {
                    j = 1;
                    break;
                }
            }

            if (j == 1) {
                alert("This email is already exists");
                window.location.href = "../Admin_pages/Admin_login.html";

            }
            else {
                alert("Successfully logged in");
                seller_records.push(seller);
                localStorage.setItem("seller_details", JSON.stringify(seller_records));

            }

            // check the password 
            if (seller["password"] === seller["confirm_password"]) {
                window.location.href = "../Admin_pages/Admin_login.html";
            }
            else {
                alert("Please check the password");
            }

        }
    </script>
</body>

</html>