<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="stylesheet" href="../../assets/css/payment.css">
    <link rel="shortcut icon" href="../../assets/images/favicon img.png" type="image/x-icon">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- ---------Font awesome------- -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css"
        integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!------------------google fonts ------------------------>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,600;1,200;1,300;1,400&display=swap"
        rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BOOKS-STORE</title>
</head>

<body>
    <!------------------------ Create the navigation bar ----------------------->

    <div class="head">
        <div class="nav-logo">
            <div class="logo">
                <a href="../../index.html"><img src="../../assets/images/books_store-removebg-preview.png"
                        alt="webiste logo" width="190"></a>
            </div>
            <div class="navi2">
                <ol class="lang">
                    <li><a href="">Lang <i class="fa-sharp fa-solid fa-caret-down"></i></a>
                        <ol class="Lang_option">
                            <li> <a href="">English</a></li>
                            <li> <a href="">Tamil</a></li>
                        </ol>
                    </li>
                </ol>
                <ul class="fonts">
                    <li> <a href="../../Pages/Account/signup.html">
                            <i class="fa-regular fa-heart"></i>
                        </a></li>
                    <li> <a href="../../Pages/Account/signup.html"><i class="fa-solid fa-cart-shopping"></i> </a></li>
                </ul>
            </div>
        </div>


        <!------------------- Create a Search bar ---------------->

        <div class="search_bar">
            <input type="text" placeholder="Search By Author Name Or Book name">
        </div>


        <!------------------------------- END OF THE NAVIGATION --------------------------------->


        <div class="container">
            <div class="nav">
                <div class="navi1">
                    <ul>
                        <li><a href="#"><img src="../../assets/images/search books.png" alt="search books img"></a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>



    <!------------------- navigation content--------->

    <div class="navigation">
        <ul>
            <li> <a href="../../index.html">Home</a></li>
            <li class="explore-menu" id="click"> <a href="#">Categories<i class="fa-solid fa-caret-down"></i></a>
                <ol class="Explore-option">
                    <li class="Arts-option"><a href="#">Arts and Biography</a>
                        <div class="arts-menu">
                            <ol>
                                <li><a href="#">Arts Forms</a></li>
                                <li><a href="#">Dance And Performing</a></li>
                                <li><a href="#">Flim and Tv</a></li>
                            </ol>
                        </div>
                    </li>
                    <li><a href="#">Fiction Books</a></li>
                    <li><a href="#">Law</a></li>
                    <li><a href="#">Medicine</a></li>
                    <li><a href="../Books/self_help.html">Self Help book</a></li>
                    <li><a href="#">Life Style</a></li>
                    <li><a href="#">Science And Maths</a></li>

                </ol>
            </li>
            <li><a href="../Books/Combo book.html">combo</a></li>
            <li><a href="../books/self_help.html">Best Seller</a></li>
            <li><a href="../../Customer-feedback.html">Customer Feedback</a></li>
            <li class="profile-menu"><a href="">My Account <i class="fa-solid fa-user"></i></a>
                <div class="profile">
                    <ol>
                        <li><a href="../../Pages/Account/edit-profile.html"><i
                                    class="fa-solid fa-pen-to-square"></i>Edit Profile</a></li>
                        <li><a href="#"><i class="fa-solid fa-message"></i>Inbox</a> </li>
                        <li><a href="#"><i class="fa-solid fa-bars"></i>Setting</a></li>
                        <li><a href="#"><i class="fa-solid fa-arrow-right-from-bracket"></i>Logout</a></li>
                    </ol>
                </div>
            </li>
        </ul>
    </div>
    <!-----------------------END OF THE NAVIGATION---------------------------->


    <!------------------------START THE PAYMENT CONTENT------------>
    <h1>You're Almost Done !!!</h1>
    <div class="tot-pay">

        <div class="container-1">
            <div class="payment">
                <form autocomplete="off" action="#">
                    <div class="row">
                        <div class="col-1">
                            <h3 class="title-1">BILLING ADDRESS:</h3>
                            <div class="input_box">
                                <span>Name:</span>
                                <input type="text" id="User_name" placeholder="Enter Your full name">
                            </div>
                            <div class="input_box">
                                <span>Email:</span>
                                <input type="email" id="User_email" placeholder="Enter Your Email">
                            </div>
                            <div class="input_box">
                                <span>Address:</span>
                                <input type="text" id="User_address" placeholder="Street - Locality">
                            </div>

                            <div class="input_box">
                                <span>City:</span>
                                <input type="text" id="User_city" placeholder="Tamilnadu">
                            </div>
                            <div class="box_flex">
                                <div class="input_box">
                                    <span>State:</span>
                                    <input type="text" id="User_state" placeholder="India">
                                </div>
                                <div class="input_box">
                                    <span>Zip-code:</span>
                                    <input type="number" id="User_zipcode" placeholder="600081">
                                </div>
                            </div>
                        </div>


                        <!-------Start the second row Payment gateway -->

                        <div class="container-2">
                            <div class="col-2">
                                <h3 class="title">PAYMENT:</h3>
                                <div class="input_box">
                                    <span>Card Accepted:</span>
                                    <img src="../../assets/images/card_img.png" alt="Payment card img" width="240px">
                                </div>
                                <div class="input_box">
                                    <span>Card Holder Name:</span>
                                    <input type="text" placeholder="Meganthan">
                                </div>
                                <div class="input_box">
                                    <span>Card Number:</span>
                                    <input type="number" placeholder="1234 - 5678 - 8902">
                                </div>
                                <div class="input_box">
                                    <span>Exp-Month:</span><br>
                                    <input type="number" placeholder="November">
                                </div>
                                <div class="box_flex">
                                    <div class="input_box">
                                        <span>Exp-Year:</span><br>
                                        <input type="number" placeholder="2016">
                                    </div>
                                    <div class="input_box">
                                        <span>CVV:</span><br>
                                        <input type="number" placeholder="0000">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <a href="../../Pages/orders/order_placed.html"><input type="button" value="Proceed to Order"
                            class="place_order" id="proceed_order"></a>

            </div>
            </form>
            <!-- OTHER PAYMENT OPTTION -->
            <div class="other-pay">
                <div class="payment-option">
                    <div class="checkbox">
                        <input type="checkbox" name="gpay">
                        <span> <img src="https://cdn-images-1.medium.com/fit/t/1600/480/1*BOrZtZYRwGEe8NlavcSzRA.png"
                                alt="" width="390px">
                        </span>
                    </div>
                    <div class="checkbox">
                        <input type="checkbox" name="gpay">
                        <span> NetBanking
                        </span>
                    </div>
                    <div class="checkbox">
                        <input type="checkbox" name="gpay">
                        <span> COD
                        </span>
                    </div>
                    <div class="checkbox">
                        <input type="checkbox" name="gpay">
                        <span> Other Payments
                        </span>
                    </div>
                </div>
            </div>
        </div>
        <div class="select-date">
            <h3>Select Your Delivery Time.</h3>
            <input type="checkbox"> <span>9am To 2pm</span><br>
            <input type="checkbox"> <span>2pm To 9pm</span>
        </div>

        <div class="vl"></div>
    </div>

    <!-------------------FOOTER CONTETNT ------------------>
    <footer>
        <div class="row">
            <div class="bookstore_logo">
                <img src="../../assets/images/logo.png" alt="bookstore logo">
                <h3>"Our purpose is motivate yourself <br>and improve your knowdledge".</h3>
            </div>
            <div class="useful_links">
                <h3>Stuff</h3>
                <ul>
                    <li>Privacy</li>
                    <li>Security</li>
                    <li>FQA</li>
                    <li>Coupons</li>
                </ul>
            </div>
            <div class="useful_links">
                <h3>Useful links</h3>
                <ul>
                    <li> Blog Post</li>
                    <li>Return Policy</li>
                    <li>join Affilate</li>
                    <li>Terms and Condition</li>

                </ul>
            </div>
            <div class="contact_us">
                <div class="icons">
                    <h3>Contact US</h3>
                    <i class="fa-brands fa-github"></i>
                    <i class="fa-brands fa-linkedin"></i>
                    <i class="fa-brands fa-whatsapp"></i>
                    <i class="fa-brands fa-twitter"></i>
                </div>
            </div>
        </div>
        <p style="text-align:center ;">&#169;Copyright 2022-Meganathan</p>
    </footer>
    <!------------------------END OF THE FOOTER CONTENT----------------- -->



    <script>
        // get the all book details from the local storage
        let bookList = JSON.parse(localStorage.getItem("Book_details"));


        // Get the all user detail from the local storage
        let user_details = JSON.parse(localStorage.getItem("userslist"));

        // Create a new localstorage to user_order
        let active_user = JSON.parse(localStorage.getItem("activeUser"));

        let order = JSON.parse(localStorage.getItem("User_Order")) ?? [];

        let cart = JSON.parse(localStorage.getItem("user_cart"));


        // Create a order date
        let newdate;
        let dateObj = new Date();
        let month = dateObj.getUTCMonth() + 1; //months from 1-12
        let day = dateObj.getUTCDate();
        let year = dateObj.getUTCFullYear();
        newdate = day + "/" + month + "/" + year;
        // orders id code
        let order_id = Date.now();
        // console.log(order_id);

        // Below the code for URL params
        let url = window.location.search;
        const search = new URLSearchParams(url);
        const product_id = search.get("id");


        console.log(product_id)
        const qty = Number(search.get("qty"));

        let userName = document.getElementById("User_name");
        let user_email = document.getElementById("User_email");
        let user_address = document.getElementById("User_address");
        let user_city = document.getElementById("User_city");
        let user_state = document.getElementById("User_state");
        let user_pincode = document.getElementById("User_zipcode");
        let product_img;
        let product_title;


        // console.log(bookList);
        // console.log(user_details);


        for (let i = 0; i < user_details.length; i++) {

            if (active_user == user_details[i]["email"]) {

                userName.value = user_details[i]["user_name"];
                user_email.value = user_details[i]["email"];
                user_address.value = user_details[i]["address"];
                user_state.value = user_details[i]["user_state"];
                user_city.value = user_details[i]["user_city"];
                user_pincode.value = user_details[i]["user_pincode"];

            }
        };

        let res1;
        bookList.forEach((element) => {

            if (element.bookid == product_id) {
                // console.log("okdan");
                return res1 = element
            }
        });

        // below the code for the single order prod
        if (product_id == Number(product_id)) {
            let userOrder = {
                "username": userName.value,
                "user_email": user_email.value,
                "user_address": user_address.value,
                "user_state": user_state.value,
                "user_city": user_city.value,
                "user_pincode": user_pincode.value,
                "product_id": product_id,
                "active_user": active_user,
                "product_img": res1["bookImage"],
                "product_title": res1["bookName"],
                "product_Price": res1["originalPrice"],
                "order_id": order_id,
                "Order_date": newdate,
                "Quantity": qty
            }
            order.push(userOrder);
            document.getElementById("proceed_order").onclick = function () {
                localStorage.setItem("User_Order", JSON.stringify(order));
            };

        }
        else {
            cart.find(el => {
                if (el.user_email == product_id) {
                    let cartOrder = {
                        "username": userName.value,
                        "user_email": user_email.value,
                        "user_address": user_address.value,
                        "user_state": user_state.value,
                        "user_city": user_city.value,
                        "user_pincode": user_pincode.value,
                        "product_id": product_id,
                        "active_user": active_user,
                        "product_img": el["bookImage"],
                        "product_title": el["bookName"],
                        "product_Price": el["originalPrice"],
                        "order_id": order_id,
                        "Order_date": newdate
                        // "Quantity": qty
                    }
                    order.push(cartOrder);
                    document.getElementById("proceed_order").onclick = function () {
                        localStorage.setItem("User_Order", JSON.stringify(order));
                    }

                }
            });
        };


        // come from the cart


    </script>
</body>

</html>